---
import { COPYRIGHT_TEXT } from '../../consts';
---
<nav class="fixed top-0 left-0 w-full py-4 z-50 transition-all duration-300 backdrop-blur-md bg-white/70 dark:bg-stone-950/70 border-b border-stone-200/50 dark:border-stone-800/50">
  <div class="container-max px-6 flex justify-between items-center">    
    <a href="/" class="text-2xl md:text-3xl font-heading font-semibold tracking-tight text-stone-900 dark:text-stone-50 hover:opacity-80 transition-opacity" aria-label="KokoroLinks Home">
      Kokoro<span class="text-rose-600">Links</span>
    </a>
    
    <div class="hidden md:flex items-center space-x-10 text-sm font-medium text-stone-600 dark:text-stone-400">
      <a href="#about" class="hover:text-rose-600 dark:hover:text-rose-400 transition-colors">Philosophy</a>
      <a href="#features" class="hover:text-rose-600 dark:hover:text-rose-400 transition-colors">Features</a>
      <a href="#demo" class="hover:text-rose-600 dark:hover:text-rose-400 transition-colors">Demo</a>
      <div class="h-4 w-[1px] bg-stone-300 dark:bg-stone-700"></div>
      <button class="wip-link text-stone-900 dark:text-stone-200 hover:text-rose-600 dark:hover:text-rose-400 transition-colors">Log in</button>
    </div>
    
    <div class="flex items-center gap-4">
      <button 
        id="nav-book-btn" 
        class="rounded-full bg-stone-900 dark:bg-stone-100 px-5 md:px-7 py-2.5 text-xs md:text-sm font-bold uppercase tracking-wider text-white dark:text-stone-900 hover:bg-rose-600 dark:hover:bg-rose-500 hover:text-white transition-all shadow-md hover:shadow-rose-500/20"
      >
        Create Your Link
      </button>

      <button id="mobile-menu-toggle" class="md:hidden p-2 text-stone-600 dark:text-stone-400" aria-label="Toggle Menu">
        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
      </button>
    </div>
  </div>
</nav>

<div id="mobile-menu" 
     class="fixed inset-y-0 right-0 w-72 shadow-2xl transform translate-x-full transition-transform duration-300 ease-in-out z-[100] md:hidden border-l border-stone-200 dark:border-stone-800"
     style="background-color: var(--mobile-bg, #ffffff); opacity: 1 !important;">
  
  <div class="h-full w-full bg-white dark:bg-stone-950 p-8 flex flex-col">
    <button id="mobile-menu-close" class="self-end p-2 text-stone-600 dark:text-stone-400 mb-12" aria-label="Close Menu">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg>
    </button>
    
    <nav class="flex flex-col space-y-8 text-xl font-medium">
      <a href="#about" class="mobile-nav-link text-stone-900 dark:text-stone-100 hover:text-rose-600 transition-colors">Philosophy</a>
      <a href="#features" class="mobile-nav-link text-stone-900 dark:text-stone-100 hover:text-rose-600 transition-colors">Features</a>
      <a href="#demo" class="mobile-nav-link text-stone-900 dark:text-stone-100 hover:text-rose-600 transition-colors">Demo</a>
      <hr class="border-stone-100 dark:border-stone-800" />
      <button class="wip-link text-left text-stone-900 dark:text-stone-100 hover:text-rose-600 transition-colors">Log in</button>
    </nav>
    
    <div class="mt-auto pt-8 border-t border-stone-100 dark:border-stone-800">
      <p class="text-xs text-stone-400 uppercase tracking-widest font-bold">
        {COPYRIGHT_TEXT}
      </p>
    </div>
  </div>
</div>

<div id="menu-overlay" class="fixed inset-0 bg-stone-900/60 backdrop-blur-sm opacity-0 pointer-events-none transition-opacity duration-300 z-[90] md:hidden"></div>

<div class="h-20"></div>

<script>
  const toggleBtn = document.getElementById('mobile-menu-toggle');
  const closeBtn = document.getElementById('mobile-menu-close');
  const menu = document.getElementById('mobile-menu');
  const overlay = document.getElementById('menu-overlay');
  const navLinks = document.querySelectorAll('.mobile-nav-link');

  const openMenu = () => {
    menu?.classList.replace('translate-x-full', 'translate-x-0');
    overlay?.classList.remove('opacity-0', 'pointer-events-none');
    document.body.style.overflow = 'hidden'; 
  };

  const closeMenu = () => {
    menu?.classList.replace('translate-x-0', 'translate-x-full');
    overlay?.classList.add('opacity-0', 'pointer-events-none');
    document.body.style.overflow = ''; 
  };

  toggleBtn?.addEventListener('click', openMenu);
  closeBtn?.addEventListener('click', closeMenu);
  overlay?.addEventListener('click', closeMenu);

  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      const targetId = this.getAttribute('href');
      if (targetId === '#') return;
      e.preventDefault();
      closeMenu();
      const targetElement = document.querySelector(targetId);
      if (targetElement) {
        targetElement.scrollIntoView({ behavior: 'smooth' });
      }
    });
  });

  document.getElementById('nav-book-btn')?.addEventListener('click', () => {
    if (window.openContactModal) {
      window.openContactModal();
    }
  });
</script>